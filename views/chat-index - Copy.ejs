 <% include header %>
 <style>
   .messages {
        margin: 0;
        padding: 0;
        margin-bottom: 3rem;
    }

    .messages li {
        padding: 0.5rem;
    }

    .messages li:nth-child(odd) {
        background: #eee;
    }
   </style>
    <!-- Services -->
    <div id="services" class="cards-1">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h2>Lawyer List</h2>
                    <!-- <p class="p-heading p-large">We serve small and medium sized.</p> -->
                </div> <!-- end of col -->
            </div> <!-- end of row -->
            <div class="row">
              <div id="pageMsg"></div>


                <div class="col-lg-12">
                     <ul class="messages"></ul>
                     <form>
                         <input type="text" class="input" autocomplete="off" autofocus />
                         <button type="button" name="submit">Send</button> 
                     </form>

                </div> <!-- end of col -->
            </div> <!-- end of row -->
        </div> <!-- end of container -->
    </div> <!-- end of cards-1 -->
    <!-- end of services -->

    <!-- Modal -->


<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.dev.js"></script>


    <script>
 /**************************** Socket.io Start******************************/
        const socket = io();
         socket.on("chat_message", function(data) {
              addMessage(data.username + ": " + data.message);
          });

          socket.on("user_join", function(data) {
              addMessage(data + " just joined the chat!");
          });

          socket.on("user_leave", function(data) {
              addMessage(data + " has left the chat.");
          });

           socket.emit("user_join", username);
/**************************** Socket.io End******************************/

 /**************************** Chat Form Start******************************/
                  const form = document.querySelector("form");
                  const input = document.querySelector(".input");
                  const messages = document.querySelector(".messages");
                  const username = prompt("Please enter a username: ", "");


                  form.addEventListener("submit", function(event) {
                      event.preventDefault();

                      addMessage(username + ": " + input.value);

                      socket.emit("chat_message", {
                          message: input.value
                      });

                      input.value = "";
                      return false;
                  }, false);

                  addMessage("You have joined the chat as '" + username  + "'.");

                  function addMessage(message) {
                      const li = document.createElement("li");
                      li.innerHTML = message;
                      messages.appendChild(li);
                      window.scrollTo(0, document.body.scrollHeight);
                  }
 /**************************** Chat Form End******************************/

      </script>
 <% include footer %>
